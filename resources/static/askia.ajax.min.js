(function(){function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype=window.Event.prototype;window.CustomEvent=a})();(function(){if(window.AskiaScript&!window.isDesignPreview){AskiaScript.executeLiveRouting=function(){}}var a=window.askia||{};if(!window.askia){window.askia=a}function g(s){return s.charAt(0).toUpperCase()+s.slice(1)}function m(t,y){if(typeof y!=="function"){return}var z=/^(?:submit|button|image|reset|file)$/i;var x=/^(?:input|select|textarea|keygen)/i;var s=/^(?:checkbox|radio)$/i;var v=t.elements;var u;for(u=0,l=v.length;u<l;u+=1){var w=v[u];if(!w.name||w.disabled||w.value===null||z.test(w.type)||!x.test(w.nodeName)||(s.test(w.type)&&!w.checked)){continue}y(w)}}a.serializeForm=function c(s,t){var u=[];m(s,function(w){var v=w.name;var x=w.value.replace(/\r?\n/gi,"\r\n");if(t&&/^(?:action)$/i.test(w.name)){x=t.replace(/\r?\n/gi,"\r\n")}u.push(encodeURIComponent(v)+"="+encodeURIComponent(x))});return u.join("&")};a.ajax=function p(t){if(!t){(console&&console.warn("The `query` argument must be a valid object for askia.ajax()"));return}if(!t.url||typeof t.url!=="string"){(console&&console.warn("The `query.url` argument must be a valid string for askia.ajax()"));return}t.method=((t.method&&t.method.toString())||"POST").toUpperCase();if(!/^(?:GET|POST|PUT|DELETE|HEAD|OPTIONS|TRACE|CONNECT)$/.test(t.method)){(console&&console.warn("The `query.method` argument must be a valid HTTP method for askia.ajax()"));return}var u=new XMLHttpRequest();u.open(t.method,t.url,true);u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");u.onload=function s(){var v=u.responseText;if(u.status>=200&&u.status<400){if(typeof t.success==="function"){t.success(v,u)}}else{if(typeof t.error==="function"){t.error(v,u)}}if(typeof t.complete==="function"){t.complete(v,u)}};u.onerror=function(){if(typeof t.error==="function"){t.error(text,u)}if(typeof t.complete==="function"){t.complete(text,u)}};u.send(t.data||null)};a.defaultEventActions={askiaAnswer:n,askiaShowQuestion:b,askiaHideQuestion:b,askiaShowResponses:null,askiaHideResponses:null,askiaReload:r,askiaSetValue:null,askiaShowMessage:null,askiaChangeQuestionsOrder:null,askiaChangeResponsesOrder:null,askiaInfo:null,askiaUpdateCaption:j};a.triggerEvent=function o(s,t){var v=t!==undefined?{detail:t}:undefined;var u=new CustomEvent(s,v);return document.dispatchEvent(u)};a.triggerAnswer=function i(){if(!a.triggerEvent("askiaAnswer")){return false}a.defaultEventActions.askiaAnswer()};function b(x){if(!(x.question.inputCode>=0)){return}var t=/^(?:show)/i.test(x.action);var v=".askia-question-"+x.question.inputCode;var w=document.querySelectorAll(v);var u;var s;for(u=0,s=w.length;u<s;u+=1){w[u].style.display=t?"":"none"}}function k(v){if(!(v.question.inputCode>=0)){return}var A=".askia-question-"+v.question.inputCode;var s=v.order.length;var z=[];var x=document.querySelectorAll(A+" .askia-response");for(var w=0;w<x.length;w++){x[w].style.display=""}for(var t=0;t<s;t++){z.push(parseInt(v.order[t].inputCode))}for(var u=0;u<x.length;u++){var y=(x[u].children[0].id).split("_");if(z.indexOf(parseInt(y[1]))<0){if(document.getElementById("askia-input"+v.question.inputCode+"_"+parseInt(y[1]))!=null){document.getElementById("askia-input"+v.question.inputCode+"_"+parseInt(y[1])).checked=false;document.getElementById("askia-input"+v.question.inputCode+"_"+parseInt(y[1])).parentElement.style.display="none"}}}}function j(x){if(x.selector===""){return}var v=x.selector;var t=x.caption;var w=document.querySelectorAll(v);var u;var s;for(u=0,s=w.length;u<s;u+=1){w[u].innerHTML=t}}function r(){if(q){return}window.location.reload()}var h=false;var d=false;var q=true;function n(){if(h){d=true;return}h=true;d=false;a.ajax({url:"../cgi-bin/AskiaExt.dll"+window.location.search,data:a.serializeForm(document.forms[0],"DoLiveRouting"),success:e,complete:f})}function e(y){var v=JSON.parse(y);var x=v.actions||[];var u;var s;var w;var t;for(u=0,s=x.length;u<s;u+=1){w=x[u];t="askia"+g(w.action);if(!a.triggerEvent(t,w)){continue}if(typeof a.defaultEventActions[t]==="function"){a.defaultEventActions[t](w)}}}function f(){h=false;q=false;if(!d){return}setTimeout(n,250)}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("change",function(u){var t=u.target||u.srcElement;var s=/^[a-z]+([0-9]+)(?:\s*|\_*)/i.exec(t.name);if(s&&(window.arrLiveRoutingInputCode.indexOf(s[1])>-1)&&(((t.nodeName==="INPUT")&&(t.parentElement.className.indexOf("askia-response")>=0||t.parentElement.className.indexOf("askia-control")>=0||t.parentElement.className.indexOf("askia-grid-row")>=0||t.parentElement.parentElement.className.indexOf("askia-grid-row")>=0)&&(t.type==="radio"||t.type==="checkbox"))||t.nodeName==="SELECT")){a.triggerAnswer()}});document.addEventListener("input",function(u){var t=u.target||u.srcElement;var s=/^[a-z]+([0-9]+)(?:\s*|\_*)/i.exec(t.name);if(s&&(window.arrLiveRoutingInputCode.indexOf(s[1])>-1)&&(((t.nodeName==="TEXTAREA")||((t.nodeName==="INPUT")&&(t.type==="color"||t.type==="date"||t.type==="datetime"||t.type==="email"||t.type==="month"||t.type==="number"||t.type==="password"||t.type==="range"||t.type==="search"||t.type==="tel"||t.type==="text"||t.type==="time"||t.type==="url"||t.type==="week")))&&(t.parentElement.className.indexOf("askia-response")>=0||t.parentElement.className.indexOf("askia-control")>=0||t.parentElement.className.indexOf("askia-grid-row")>=0||t.parentElement.parentElement.className.indexOf("askia-grid-row")>=0||t.className.indexOf("askia-live")>=0))){a.triggerAnswer()}});if(window.arrLiveRoutingShortcut&&window.arrLiveRoutingShortcut.length>=1){a.triggerAnswer()}})}());
